<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lumino - Widgets</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/static/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/static/css/datepicker3.css" rel="stylesheet" />
    <link href="/static/css/styles.css" rel="stylesheet" />
    <link href="/static/css/styles.css" rel="stylesheet" />
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Custom Font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet" />

    <!--                [if lt IE 9]>
	<script src="js/html5shiv.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]                -->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.1.0/mdb.min.css" rel="stylesheet" />
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><span>maentech</span>Admin</a>
          <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#"><em class="fa fa-envelope"></em><span class="label label-danger">15</span></a>
              <ul class="dropdown-menu dropdown-messages">
                <li>
                  <div class="dropdown-messages-box">
                    <a href="profile.html" class="pull-left"><img alt="image" class="img-circle" src="http://placehold.it/40/30a5ff/fff" /></a>
                    <div class="message-body">
                      <small class="pull-right">3 mins ago</small>
                      <a href="#"><strong>John Doe</strong> commented on <strong>your photo</strong>.</a>
                      <br /><small class="text-muted">1:24 pm - 25/03/2015</small>
                    </div>
                  </div>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="dropdown-messages-box">
                    <a href="profile.html" class="pull-left"><img alt="image" class="img-circle" src="http://placehold.it/40/30a5ff/fff" /></a>
                    <div class="message-body">
                      <small class="pull-right">1 hour ago</small>
                      <a href="#">New message from <strong>Jane Doe</strong>.</a>
                      <br /><small class="text-muted">12:27 pm - 25/03/2015</small>
                    </div>
                  </div>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="all-button">
                    <a href="#"><em class="fa fa-inbox"></em> <strong>All Messages</strong></a>
                  </div>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#"><em class="fa fa-bell"></em><span class="label label-info">5</span></a>
              <ul class="dropdown-menu dropdown-alerts">
                <li>
                  <a href="#">
                    <div>
                      <em class="fa fa-envelope"></em> 1 New Message
                      <span class="pull-right text-muted small">3 mins ago</span>
                    </div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="#">
                    <div>
                      <em class="fa fa-heart"></em> 12 New Likes
                      <span class="pull-right text-muted small">4 mins ago</span>
                    </div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="#">
                    <div>
                      <em class="fa fa-user"></em> 5 New Followers
                      <span class="pull-right text-muted small">4 mins ago</span>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <!-- /.container-fluid -->
    </nav>
    <div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">
      <div class="profile-sidebar">
        <div class="profile-userpic">
          <img src="/static/images/ppKim.jpg" class="img-responsive" alt="" />
        </div>
        <div class="profile-usertitle">
          <div class="profile-usertitle-name">Admin</div>
          <div class="profile-usertitle-status">
            <span class="indicator label-success"></span>Online
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="divider"></div>
      <form role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" />
        </div>
      </form>
      <ul class="nav menu">
        <li >
          <a href="/admin/index"><em class="fa fa-dashboard">&nbsp;</em> Dashboard</a>
        </li>
        <li class="active">
          <a href="/admin/siswa"><em class="fa fa-calendar">&nbsp;</em> Siswa</a>
        </li>
        <li>
          <a href="/admin/matkul"><em class="fa fa-bar-chart">&nbsp;</em> Mata Pelajaran</a>
        </li>
        <li>
          <a href="/admin/nilai"><em class="fa fa-toggle-off">&nbsp;</em> Nilai</a>
        </li>
        <li>
          <a href="/admin/jadwal"><em class="fa fa-clone">&nbsp;</em> Jadwal Pelajaran</a>
        </li>
        
        <li>
          <a href="login.html"><em class="fa fa-power-off">&nbsp;</em> Logout</a>
        </li>
      </ul>
    </div>
    <!-- /.sidebar -->

    <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
      <div class="row">
        <ol class="breadcrumb">
          <li>
            <a href="#"><em class="fa fa-home"></em></a>
          </li>
          <li class="active">Siswa</li>
        </ol>
      </div>
      <!-- /.row -->

      <div class="row">
        <div class="col-lg-12">
          <h1 class="page-header">Siswa</h1>
        </div>
      </div>
      <!-- /.row -->
      <!-- /.row -->

      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              Daftar Siswa

              <button type="button" class="btn btn-primary pull-right" style="margin-top: 3px; padding: 7px ; margin-right: 13px;" data-toggle="modal" data-target="#exampleModal">Tambah Mahasiswa</button>
            </div>

           
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Data Diri Mahasiswa</h5>
                  </div>
                  <div class="modal-body">
                    <h4>Harap isi informasi berikut:</h4>
                    <form method="POST" action="/admin/create" enctype="multipart/form-data">
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="nama" class="form-label">Nama Mahasiswa</label>
                        <input type="text" class="form-control" id="nama" name="nama" placeholder="Masukan nama mahasiswa" />
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="nim" class="form-label">Nim</label>
                        <input type="number" class="form-control" id="nim" name="nim" placeholder="Masukan nim mahasiswa" />
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="jkelamin" class="form-label">Jenis Kelamin</label>
                        <select class="form-control" id="jkelamin" name="jkelamin">
                          <option value="">-- Pilih Jenis Kelamin --</option>
                          <option value="L">Laki-laki</option>
                          <option value="P">Perempuan</option>
                        </select>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="prodi" class="form-label">Prodi</label>
                        <input type="text" class="form-control" id="prodi" placeholder="Masukan prodi mahasiswa" name="prodi"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="alamat" class="form-label">Alamat</label>
                        <input type="text" class="form-control" id="alamat" placeholder="Masukan alamat mahasiswa" name="alamat"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="foto" class="form-label">Foto Profil</label>
                        <input type="file" class="form-control" id="foto" name="foto" />
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>


            {% for mhs in mahasiswa %}
            <div class="modal fade" id="editModal_{{ mhs[2] }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Data Diri Mahasiswa</h5>
                  </div>
                  <div class="modal-body">
                    <h4>Harap isi informasi berikut:</h4>
                    <form method="POST" action="/admin/update/{{ mhs[0] }}" enctype="multipart/form-data">
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="nama" class="form-label">Nama Mahasiswa</label>
                        <input type="text" class="form-control" id="nama" name="nama" placeholder="Masukan nama mahasiswa" value="{{ mhs[1] }}"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="nim" class="form-label">Nim</label>
                        <input type="number" class="form-control" id="nim" name="nim" placeholder="Masukan nim mahasiswa" value="{{ mhs[2] }}"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="jkelamin" class="form-label">Jenis Kelamin</label>
                        <select class="form-control" id="jkelamin" name="jkelamin">
                          <option value="">-- Pilih Jenis Kelamin --</option>
                          <option value="L" {% if mhs[3] == 'L' %}selected{% endif %}>Laki-laki</option>
                          <option value="P" {% if mhs[3] == 'P'%}selected{% endif %}>Perempuan</option>
                        </select>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="prodi" class="form-label">Prodi</label>
                        <input type="text" class="form-control" id="prodi" placeholder="Masukan prodi mahasiswa" name="prodi" value="{{ mhs[4] }}"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="alamat" class="form-label">Alamat</label>
                        <input type="text" class="form-control" id="alamat" placeholder="Masukan alamat mahasiswa" name="alamat" value="{{ mhs[5] }}"/>
                      </div>
                      <div class="mb-3" style="margin-top: 10px;">
                        <label for="foto" class="form-label">Foto Profil</label>
                        <input type="file" class="form-control" id="foto" name="foto" />
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}

            
            <div class="panel-body">
              <div class="col-md-12 col-sm-12">
                <div class="x_panel">
                  <div class="x_content">
                    <div class="row">
                      <div class="col-sm-12">
                        <div class="card-box table-responsive">
                          <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                            <thead>
                              <tr>
                                <th>No</th>
                                <th>Nama</th>
                                <th>NIM</th>
                                <th>Jenis Kelamin</th>
                                <th>Prodi</th>
                                <th>Alamat</th>
                                <th>Foto</th>
                                <th>Edit</th>
                                <th>Updated</th>
                              </tr>
                            </thead>
                            <tbody>
                              {% for mhs in mahasiswa %}
                              <tr>
                                <td>{{ loop.index }}</td>
                                <td>{{ mhs[1] }}</td> 
                                <td>{{ mhs[2] }}</td>  <!-- NIM -->
                                <td>{{ mhs[3] }}</td>  <!-- Jenis Kelamin -->
                                <td>{{ mhs[4] }}</td>  <!-- Prodi -->
                                <td>{{ mhs[5] }}</td>  <!-- Alamat -->
                                <td>
                                  {% if mhs[6] %}
                                  <img src="{{ url_for('static', filename='uploads/' ~ mhs[6]) }}" alt="Foto" width="45" >
                                  {% else %}
                                  Tidak ada foto
                                  {% endif %}
                                </td>
                                <td>

                                  <a href=""  title="Edit" data-toggle="modal" data-target="#editModal_{{mhs[2]}}">
                                    <i class="fas fa-edit fa-lg text-primary"></i>
                                  </a>
                                  &nbsp;
                                  <a href="/admin/delete/{{ mhs[0] }}" title="Delete" onclick="return confirm('APAKAH ANDA YAKIN INGIN MENGHAPUS DATA INI?')">
                                    <i class="fas fa-trash fa-lg text-danger"></i>
                                  </a>
                                </td>
                                
                                <td>{{ mhs[7] if mhs|length > 7 else '-' }}</td>  <!-- Updated_at -->
                              </tr>
                              {% endfor %}
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
                       
          </div>
        </div>
      </div>

      <!-- /.row -->
    </div> <!-- /.main -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.bundle.min.js"></script>
    <!-- MDB 5.1.0 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.1.0/mdb.min.js"></script>

    <!-- MDB JS -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.easy-pie-chart/2.1.7/jquery.easypiechart.min.js"></script>

    <script src="/static/js/bootstrap.min.js"></script>

    <script src="/static/js/chart.min.js"></script>
    <script src="/static/js/chart-data.js"></script>
    <script src="/static/js/easypiechart.js"></script>
    <script src="/static/js/easypiechart-data.js"></script>
    <script src="/static/js/bootstrap-datepicker.js"></script>
    <script src="/static/js/custom.js"></script>
  </body>
</html>
